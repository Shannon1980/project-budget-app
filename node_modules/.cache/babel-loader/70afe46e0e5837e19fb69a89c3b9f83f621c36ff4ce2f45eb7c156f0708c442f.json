{"ast":null,"code":"import _objectSpread from\"/workspace/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";const API_BASE=process.env.REACT_APP_API_BASE_URL||'http://localhost:5179';const buildHeaders=()=>{const headers={'Content-Type':'application/json'};try{const raw=localStorage.getItem('pb_api_settings');if(raw){const{tokenType,tokenValue,apiKeyHeader,apiKeyValue}=JSON.parse(raw);if(tokenType==='bearer'&&tokenValue)headers['Authorization']=\"Bearer \".concat(tokenValue);if(tokenType==='apiKey'&&apiKeyHeader&&apiKeyValue)headers[apiKeyHeader]=apiKeyValue;}}catch(_unused){}return headers;};const request=async function(path){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const response=await fetch(\"\".concat(API_BASE).concat(path),_objectSpread({headers:buildHeaders()},options));if(!response.ok){const text=await response.text().catch(()=>'');const error=new Error(\"API \".concat(options.method||'GET',\" \").concat(path,\" failed: \").concat(response.status,\" \").concat(text));error.status=response.status;throw error;}const contentType=response.headers.get('content-type')||'';if(contentType.includes('application/json')){return response.json();}return response.text();};export const getState=async()=>{return request('/state/1');};export const putState=async state=>{return request('/state/1',{method:'PUT',body:JSON.stringify(state)});};","map":{"version":3,"names":["API_BASE","process","env","REACT_APP_API_BASE_URL","buildHeaders","headers","raw","localStorage","getItem","tokenType","tokenValue","apiKeyHeader","apiKeyValue","JSON","parse","concat","_unused","request","path","options","arguments","length","undefined","response","fetch","_objectSpread","ok","text","catch","error","Error","method","status","contentType","get","includes","json","getState","putState","state","body","stringify"],"sources":["/workspace/src/api/client.js"],"sourcesContent":["const API_BASE = process.env.REACT_APP_API_BASE_URL || 'http://localhost:5179';\n\nconst buildHeaders = () => {\n  const headers = { 'Content-Type': 'application/json' };\n  try {\n    const raw = localStorage.getItem('pb_api_settings');\n    if (raw) {\n      const { tokenType, tokenValue, apiKeyHeader, apiKeyValue } = JSON.parse(raw);\n      if (tokenType === 'bearer' && tokenValue) headers['Authorization'] = `Bearer ${tokenValue}`;\n      if (tokenType === 'apiKey' && apiKeyHeader && apiKeyValue) headers[apiKeyHeader] = apiKeyValue;\n    }\n  } catch {}\n  return headers;\n};\n\nconst request = async (path, options = {}) => {\n  const response = await fetch(`${API_BASE}${path}`, {\n    headers: buildHeaders(),\n    ...options\n  });\n  if (!response.ok) {\n    const text = await response.text().catch(() => '');\n    const error = new Error(`API ${options.method || 'GET'} ${path} failed: ${response.status} ${text}`);\n    error.status = response.status;\n    throw error;\n  }\n  const contentType = response.headers.get('content-type') || '';\n  if (contentType.includes('application/json')) {\n    return response.json();\n  }\n  return response.text();\n};\n\nexport const getState = async () => {\n  return request('/state/1');\n};\n\nexport const putState = async (state) => {\n  return request('/state/1', {\n    method: 'PUT',\n    body: JSON.stringify(state)\n  });\n};\n\n"],"mappings":"+FAAA,KAAM,CAAAA,QAAQ,CAAGC,OAAO,CAACC,GAAG,CAACC,sBAAsB,EAAI,uBAAuB,CAE9E,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACzB,KAAM,CAAAC,OAAO,CAAG,CAAE,cAAc,CAAE,kBAAmB,CAAC,CACtD,GAAI,CACF,KAAM,CAAAC,GAAG,CAAGC,YAAY,CAACC,OAAO,CAAC,iBAAiB,CAAC,CACnD,GAAIF,GAAG,CAAE,CACP,KAAM,CAAEG,SAAS,CAAEC,UAAU,CAAEC,YAAY,CAAEC,WAAY,CAAC,CAAGC,IAAI,CAACC,KAAK,CAACR,GAAG,CAAC,CAC5E,GAAIG,SAAS,GAAK,QAAQ,EAAIC,UAAU,CAAEL,OAAO,CAAC,eAAe,CAAC,WAAAU,MAAA,CAAaL,UAAU,CAAE,CAC3F,GAAID,SAAS,GAAK,QAAQ,EAAIE,YAAY,EAAIC,WAAW,CAAEP,OAAO,CAACM,YAAY,CAAC,CAAGC,WAAW,CAChG,CACF,CAAE,MAAAI,OAAA,CAAM,CAAC,CACT,MAAO,CAAAX,OAAO,CAChB,CAAC,CAED,KAAM,CAAAY,OAAO,CAAG,cAAAA,CAAOC,IAAI,CAAmB,IAAjB,CAAAC,OAAO,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,CAAC,CAAC,CACvC,KAAM,CAAAG,QAAQ,CAAG,KAAM,CAAAC,KAAK,IAAAT,MAAA,CAAIf,QAAQ,EAAAe,MAAA,CAAGG,IAAI,EAAAO,aAAA,EAC7CpB,OAAO,CAAED,YAAY,CAAC,CAAC,EACpBe,OAAO,CACX,CAAC,CACF,GAAI,CAACI,QAAQ,CAACG,EAAE,CAAE,CAChB,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAJ,QAAQ,CAACI,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,IAAM,EAAE,CAAC,CAClD,KAAM,CAAAC,KAAK,CAAG,GAAI,CAAAC,KAAK,QAAAf,MAAA,CAAQI,OAAO,CAACY,MAAM,EAAI,KAAK,MAAAhB,MAAA,CAAIG,IAAI,cAAAH,MAAA,CAAYQ,QAAQ,CAACS,MAAM,MAAAjB,MAAA,CAAIY,IAAI,CAAE,CAAC,CACpGE,KAAK,CAACG,MAAM,CAAGT,QAAQ,CAACS,MAAM,CAC9B,KAAM,CAAAH,KAAK,CACb,CACA,KAAM,CAAAI,WAAW,CAAGV,QAAQ,CAAClB,OAAO,CAAC6B,GAAG,CAAC,cAAc,CAAC,EAAI,EAAE,CAC9D,GAAID,WAAW,CAACE,QAAQ,CAAC,kBAAkB,CAAC,CAAE,CAC5C,MAAO,CAAAZ,QAAQ,CAACa,IAAI,CAAC,CAAC,CACxB,CACA,MAAO,CAAAb,QAAQ,CAACI,IAAI,CAAC,CAAC,CACxB,CAAC,CAED,MAAO,MAAM,CAAAU,QAAQ,CAAG,KAAAA,CAAA,GAAY,CAClC,MAAO,CAAApB,OAAO,CAAC,UAAU,CAAC,CAC5B,CAAC,CAED,MAAO,MAAM,CAAAqB,QAAQ,CAAG,KAAO,CAAAC,KAAK,EAAK,CACvC,MAAO,CAAAtB,OAAO,CAAC,UAAU,CAAE,CACzBc,MAAM,CAAE,KAAK,CACbS,IAAI,CAAE3B,IAAI,CAAC4B,SAAS,CAACF,KAAK,CAC5B,CAAC,CAAC,CACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}